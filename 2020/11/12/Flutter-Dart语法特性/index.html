<!DOCTYPE html>


<html lang="zh-CN">
  

<head>
  <meta charset="utf-8" />
  <meta name="baidu-site-verification" content="7cj80g9SOU" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    Flutter ~ Dart语法特性 |  Soto
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">
  
<link rel="stylesheet" href="/css/custom.css">

  
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
  
  

  

<link rel="alternate" href="/atom.xml" title="Soto" type="application/atom+xml">
</head>

</html>


<body>
  <div id="app">
    
      
      <canvas width="1777" height="841"
        style="position: fixed; left: 0px; top: 0px; z-index: 99999; pointer-events: none;"></canvas>
      
    <main class="content on">
      <section class="outer">
  <article
  id="post-Flutter-Dart语法特性"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Flutter ~ Dart语法特性
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/11/12/Flutter-Dart%E8%AF%AD%E6%B3%95%E7%89%B9%E6%80%A7/" class="article-date">
  <time datetime="2020-11-12T11:23:55.000Z" itemprop="datePublished">2020-11-12</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Flutter%E5%BC%80%E5%8F%91/">Flutter开发</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">6.5k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">28 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="一-Dart-的基本语法"><a href="#一-Dart-的基本语法" class="headerlink" title="一. Dart 的基本语法"></a>一. Dart 的基本语法</h2><h3 id="1、程序入口"><a href="#1、程序入口" class="headerlink" title="1、程序入口"></a>1、程序入口</h3><ul>
<li>Dart 的入口也是 main 函数，且没有返回值。</li>
<li>传递给 main 的命令行参数，会存放在 <code>List&lt;String&gt; args</code> 中。</li>
<li>定义字符串可以使用单引号或双引号。</li>
<li>每行语句必须使用分号结尾。</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"Hello World"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、声明变量"><a href="#2、声明变量" class="headerlink" title="2、声明变量"></a>2、声明变量</h3><ul>
<li><p>明确声明：变量类型 变量名称 = 赋值;</p>
</li>
<li><p>类型推导：<code>var / dynamic / const / final</code> 变量名称 = 赋值;</p>
<a id="more"></a>

</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 明确的声明</span></span><br><span class="line"><span class="built_in">String</span> name = <span class="string">"lqr"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 类型推导(var/final/const)</span></span><br><span class="line"><span class="comment">// 类型推导的方式虽然没有明确的指定变量的类型，但是变量是有自己明确的类型的</span></span><br><span class="line"><span class="comment">// 2.1 var声明变量</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="comment">// age = "abc"; // IDE报错：A value of type 'String' can't be assigned to a variable of type 'int'.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.2 final声明常量</span></span><br><span class="line"><span class="keyword">final</span> height = <span class="number">1.88</span>;</span><br><span class="line"><span class="comment">// height = 2.00; // IDE报错：The final variable 'height' can only be set once.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.3 const声明常量</span></span><br><span class="line"><span class="keyword">const</span> address = <span class="string">"广州市"</span>;</span><br><span class="line"><span class="comment">// address = "北京市"; // IDE报错：Constant variables can't be assigned a value.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.4 final和const的区别</span></span><br><span class="line"><span class="comment">// const必须赋值 常量值（编译期间需要有一个确定的值）</span></span><br><span class="line"><span class="comment">// final可以通过计算/函数获取一个值（运行期间来确定一个值）</span></span><br><span class="line"><span class="comment">// const date1 = DateTime.now(); // 写法错误</span></span><br><span class="line"><span class="keyword">final</span> date2 = <span class="built_in">DateTime</span>.now();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.5 Object和dynamic的区别</span></span><br><span class="line"><span class="comment">// 分别使用Object 和 dynamic，让父类引用指向子类对象</span></span><br><span class="line"><span class="comment">// Object调用方法时，编译时会报错</span></span><br><span class="line"><span class="built_in">Object</span> obj = <span class="string">"lqr"</span>;</span><br><span class="line"><span class="built_in">print</span>(obj.substring(<span class="number">1</span>)); <span class="comment">// IDE报错：The method 'substring' isn't defined for the type 'Object'.</span></span><br><span class="line"><span class="comment">// dynamic调用方法时，编译时不报错，但是运行时会存在安全隐患</span></span><br><span class="line"><span class="comment">// dynamic是明确声明（var是类型推导）</span></span><br><span class="line"><span class="built_in">dynamic</span> obj = <span class="string">"lqr"</span>;</span><br><span class="line"><span class="built_in">print</span>(obj.substring(<span class="number">1</span>)); <span class="comment">// qr</span></span><br></pre></td></tr></table></figure>

<h3 id="3、-Dart-没有-非零即真"><a href="#3、-Dart-没有-非零即真" class="headerlink" title="3、[Dart 没有]非零即真"></a>3、[Dart 没有]非零即真</h3><p>js 中存在非零即真、非空即真的特性，但在 Dart 中没有！！Dart 要求 <code>if()</code> 语句必须传入一个 bool 类型：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Dart中没有非零即真，也没有非空即真</span></span><br><span class="line"><span class="keyword">var</span> flag = <span class="string">"true"</span>;</span><br><span class="line"><span class="keyword">if</span> (flag) &#123; <span class="comment">// IDE报错：Conditions must have a static type of 'bool'.</span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"执行代码"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：Dart 不支持非空即真或者非 0 即真，必须有明确的 bool 类型</p>
</blockquote>
<h3 id="4、字符串类型"><a href="#4、字符串类型" class="headerlink" title="4、字符串类型"></a>4、字符串类型</h3><p>Dart 有三种定义字符串的方式：</p>
<ul>
<li><p>单引号(‘’)：与双引号相同。</p>
</li>
<li><p>双引号(“”)：与单引号相同。</p>
</li>
<li><p>三引号(“”””””)：可以定义多行字符串，不需要借助 <code>\n</code>。</p>
</li>
</ul>
  <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 定义字符串</span></span><br><span class="line"><span class="keyword">var</span> str1 = <span class="string">'abc'</span>;</span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">"abc"</span>;</span><br><span class="line"><span class="keyword">var</span> str3 = <span class="string">"""</span></span><br><span class="line"><span class="string">abc</span></span><br><span class="line"><span class="string">cba</span></span><br><span class="line"><span class="string">nba</span></span><br><span class="line"><span class="string">"""</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 小技巧：如果字符串中存在双引号，又不想转义的话，可以使用单引号来定义该字符串，反之使用双引号。</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">'a"b"c'</span>); <span class="comment">// a"b"c</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"a'b'c"</span>); <span class="comment">// a'b'c</span></span><br></pre></td></tr></table></figure>

<p>Dart 支持字符串插值：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2. 字符串和表达式拼接</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"lqr"</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">19</span>;</span><br><span class="line"><span class="keyword">var</span> height = <span class="number">1.88</span>;</span><br><span class="line"><span class="comment">// 强调：$&#123;变量&#125;可以省略&#123;&#125;，$&#123;表达式&#125;不能省略&#123;&#125;</span></span><br><span class="line"><span class="comment">// var message1 = "my name is $&#123;name&#125;, age is $&#123;age&#125;, height is $&#123;height&#125;";</span></span><br><span class="line"><span class="keyword">var</span> message1 = <span class="string">"my name is <span class="subst">$name</span>, age is <span class="subst">$age</span>, height is <span class="subst">$height</span>"</span>; <span class="comment">// my name is lqr, age is 19, height is 1.88</span></span><br><span class="line"><span class="keyword">var</span> message2 = <span class="string">"name is <span class="subst">$name</span>, type is <span class="subst">$&#123;name.runtimeType&#125;</span>"</span>; <span class="comment">// name is lqr, type is String</span></span><br><span class="line"><span class="built_in">print</span>(message1);</span><br><span class="line"><span class="built_in">print</span>(message2);</span><br></pre></td></tr></table></figure>

<h3 id="5、集合类型"><a href="#5、集合类型" class="headerlink" title="5、集合类型"></a>5、集合类型</h3><p>Dart 集合类型有：</p>
<ul>
<li>列表 List：[ele1, ele2, ele2, ele1]</li>
<li>集合 Set：{ele1, ele2, ele3}</li>
<li>映射 Map：{“key1” : value1, “key2” : value2}</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 列表List：[];</span></span><br><span class="line"><span class="keyword">var</span> names = [<span class="string">"abc"</span>, <span class="string">"cba"</span>, <span class="string">"nba"</span>, <span class="string">"cba"</span>];</span><br><span class="line">names.add(<span class="string">"mba"</span>);</span><br><span class="line"><span class="comment">// names.remove(value);</span></span><br><span class="line"><span class="comment">// names.removeAt(index);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 集合Set：&#123;&#125;;</span></span><br><span class="line"><span class="keyword">var</span> movies = &#123;<span class="string">"星际穿越"</span>, <span class="string">"大话西游"</span>, <span class="string">"盗梦空间"</span>&#125;;</span><br><span class="line">names = <span class="built_in">Set</span>&lt;<span class="built_in">String</span>&gt;.from(names).toList(); <span class="comment">// 可以用Set来去重</span></span><br><span class="line"><span class="built_in">print</span>(names);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 映射Map</span></span><br><span class="line"><span class="keyword">var</span> info = &#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"lqr"</span>,</span><br><span class="line">  <span class="string">"age"</span>: <span class="number">18</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="二、Dart-的函数使用"><a href="#二、Dart-的函数使用" class="headerlink" title="二、Dart 的函数使用"></a>二、Dart 的函数使用</h2><h3 id="1、函数的基本使用"><a href="#1、函数的基本使用" class="headerlink" title="1、函数的基本使用"></a>1、函数的基本使用</h3><p>Dart 的函数定义：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">返回值 函数的名称(参数列表) &#123;</span><br><span class="line">  函数体</span><br><span class="line">  return 返回值</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="built_in">print</span>(sum(<span class="number">20</span>, <span class="number">30</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> sum(<span class="built_in">int</span> num1, <span class="built_in">int</span> num2) &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回值的类型可以省略（开发中不推荐）</span></span><br><span class="line"><span class="comment">// sum(int num1, int num2) &#123;</span></span><br><span class="line"><span class="comment">//   return num1 + num2;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2、函数的可选参数"><a href="#2、函数的可选参数" class="headerlink" title="2、函数的可选参数"></a>2、函数的可选参数</h3><p>Dart 的函数参数有两类：</p>
<ul>
<li>必选参数：必须传</li>
<li>可选参数：可不传</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  sayHello1(<span class="string">"lqr"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 必选参数：必须传</span></span><br><span class="line"><span class="keyword">void</span> sayHello1(<span class="built_in">String</span> name) &#123;</span><br><span class="line">  <span class="built_in">print</span>(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>可选参数有 2 种：<ul>
<li>位置可选参数：[int age, double height]</li>
<li>命名可选参数：{int age, double height}</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  sayHello2(<span class="string">"lqr"</span>);</span><br><span class="line">  sayHello2(<span class="string">"lqr"</span>, <span class="number">18</span>, <span class="number">1.88</span>);</span><br><span class="line"></span><br><span class="line">  sayHello3(<span class="string">"lqr"</span>, age: <span class="number">18</span>, height: <span class="number">1.88</span>);</span><br><span class="line">  sayHello3(<span class="string">"lqr"</span>, height: <span class="number">1.88</span>, age: <span class="number">18</span>);</span><br><span class="line">  sayHello3(<span class="string">"lqr"</span>, height: <span class="number">1.88</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 位置可选参数：[int age, double height]</span></span><br><span class="line"><span class="comment">// 实参和形参在进行匹配时，是根据位置来匹配</span></span><br><span class="line"><span class="keyword">void</span> sayHello2(<span class="built_in">String</span> name, [<span class="built_in">int</span> age, <span class="built_in">double</span> height]) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 命名可选参数：&#123;int age, double height&#125;</span></span><br><span class="line"><span class="comment">// 实参和形参在进行匹配时，是根据变量名来匹配</span></span><br><span class="line"><span class="keyword">void</span> sayHello3(<span class="built_in">String</span> name, &#123;<span class="built_in">int</span> age, <span class="built_in">double</span> height&#125;) &#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、函数的默认参数"><a href="#3、函数的默认参数" class="headerlink" title="3、函数的默认参数"></a>3、函数的默认参数</h3><p>Dart 中没有函数重载!!!Dart 中没有函数重载!!!Dart 中没有函数重载!!!但是，Dart 函数支持为可选参数设置默认值：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> sayHello1(<span class="built_in">String</span> name) &#123;</span><br><span class="line">  <span class="built_in">print</span>(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Dart中没有函数的重载</span></span><br><span class="line"><span class="comment">// void sayHello1()&#123; // IDE报错：The name 'sayHello1' is already defined.</span></span><br><span class="line"><span class="comment">//   ...</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意：只有可选参数才可以有默认值，必传参数没有默认值</span></span><br><span class="line"><span class="keyword">void</span> sayHello4(<span class="built_in">String</span> name, [<span class="built_in">int</span> age = <span class="number">20</span>, <span class="built_in">double</span> height = <span class="number">1.7</span>]) &#123;&#125;</span><br><span class="line"><span class="keyword">void</span> sayHello5(<span class="built_in">String</span> name, &#123;<span class="built_in">int</span> age = <span class="number">20</span>, <span class="built_in">double</span> height = <span class="number">1.7</span>&#125;) &#123;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：只有可选参数才能设置默认值。</p>
</blockquote>
<h3 id="4、函数是一等公民"><a href="#4、函数是一等公民" class="headerlink" title="4、函数是一等公民"></a>4、函数是一等公民</h3><p><code>函数是一等公民</code> 意味着可以将函数赋值给一个变量，也可以将函数作为另外一个函数的参数或返回值来使用。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="comment">// 1. 直接找到另外一个定义的函数传进去</span></span><br><span class="line">  test(bar); <span class="comment">// bar函数被调用</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. 匿名函数 (参数列表)&#123;函数体&#125;;</span></span><br><span class="line">  test(() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"匿名函数被调用"</span>); <span class="comment">// 匿名函数被调用</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. 箭头函数：条件，函数体只有一行代码</span></span><br><span class="line">  <span class="comment">// 注意：Dart中的箭头函数与js中的箭头函数是两回事</span></span><br><span class="line">  test(() =&gt; <span class="built_in">print</span>(<span class="string">"箭头函数被调用"</span>)); <span class="comment">// 箭头函数被调用</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数可以作为另外一个函数的参数</span></span><br><span class="line"><span class="keyword">void</span> test(<span class="built_in">Function</span> foo) &#123;</span><br><span class="line">  <span class="keyword">var</span> result = foo();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> bar() &#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"bar函数被调用"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述代码中，当将函数作为另一个函数的参数时，使用 <code>Function</code> 来声明这个参数类型，很明显有个问题，那就是无法对传入的函数做限制：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  test((name) &#123;</span><br><span class="line">    <span class="built_in">print</span>(name); <span class="comment">// lqr</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 封装test函数，要求：传入一个函数</span></span><br><span class="line"><span class="comment">// 缺点：Function无法对传入函数做限制（比如：函数的参数列表、返回值）</span></span><br><span class="line"><span class="keyword">void</span> test(<span class="built_in">Function</span> foo) &#123;</span><br><span class="line">  foo(<span class="string">"lqr"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这时，可以使用 <code>函数签名</code> 来代替 <code>Function</code>：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  test((num1, num2) &#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以限制 作为参数的函数的类型</span></span><br><span class="line"><span class="comment">// 缺点：相当于在形参位置上写了一个函数声明（函数签名），整体看起来可读性差</span></span><br><span class="line"><span class="keyword">void</span> test(<span class="built_in">int</span> foo(<span class="built_in">int</span> num1, <span class="built_in">int</span> num2)) &#123;</span><br><span class="line">  foo(<span class="number">20</span>, <span class="number">30</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>为了有更好的可读性，可以使用 <code>typedef</code> 来代替 <code>函数签名</code>：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  test((num1, num2) &#123;</span><br><span class="line">    <span class="keyword">return</span> num1 + num2;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> demo1 = demo();</span><br><span class="line">  <span class="built_in">print</span>(demo1(<span class="number">20</span>, <span class="number">30</span>)); <span class="comment">// 600</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以使用typedef定义一个函数类型</span></span><br><span class="line"><span class="keyword">typedef</span> Calculate = <span class="built_in">int</span> <span class="built_in">Function</span>(<span class="built_in">int</span> num1, <span class="built_in">int</span> num2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> test(Calculate calc) &#123;</span><br><span class="line">  calc(<span class="number">20</span>, <span class="number">30</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数作为返回值</span></span><br><span class="line">Calculate demo() &#123;</span><br><span class="line">  <span class="keyword">return</span> (num1, num2) &#123;</span><br><span class="line">    <span class="keyword">return</span> num1 * num2;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="三、Dart-的特殊运算符"><a href="#三、Dart-的特殊运算符" class="headerlink" title="三、Dart 的特殊运算符"></a>三、Dart 的特殊运算符</h2><h3 id="1、运算符"><a href="#1、运算符" class="headerlink" title="1、运算符"></a>1、运算符</h3><ul>
<li><code>??=</code>：赋值运算符（变量会 null 时才执行赋值操作）</li>
<li><code>??</code>：条件运算符（有点像简化版的三元运算符）</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. ??=</span></span><br><span class="line"><span class="comment">// 当原来的变量有值时，那么 ??= 不执行</span></span><br><span class="line"><span class="comment">// 原来的变量为null时，那么将值赋值给这个变量</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="keyword">null</span>;</span><br><span class="line">name ??= <span class="string">"lilei"</span>;</span><br><span class="line"><span class="built_in">print</span>(name); <span class="comment">// lilei</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. ??</span></span><br><span class="line"><span class="comment">// ??前面的数据有值，那么就使用??前面的数据</span></span><br><span class="line"><span class="comment">// ??前面的数据为null，那么就使用后面的值</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">var</span> temp = name ?? <span class="string">"lilei"</span>;</span><br><span class="line"><span class="built_in">print</span>(temp); <span class="comment">// lilei</span></span><br></pre></td></tr></table></figure>

<h3 id="2、级联语法"><a href="#2、级联语法" class="headerlink" title="2、级联语法(..)"></a>2、级联语法(..)</h3><p>Dart 可以使用级联语法 <code>(..)</code> 将任意对象的 <code>变量赋值</code> 或 <code>方法调用</code> 操作都变成 <code>链式调用</code>：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="comment">// var p = Person();</span></span><br><span class="line">  <span class="comment">// p.name = "lqr";</span></span><br><span class="line">  <span class="comment">// p.run();</span></span><br><span class="line">  <span class="comment">// p.eat();</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 级联运算符</span></span><br><span class="line">  <span class="keyword">var</span> p = Person()</span><br><span class="line">    ..name = <span class="string">"lqr"</span></span><br><span class="line">    ..eat()</span><br><span class="line">    ..run();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、for-循环的使用"><a href="#3、for-循环的使用" class="headerlink" title="3、for 循环的使用"></a>3、for 循环的使用</h3><p>Dart 支持 <code>普通 for 循环</code>，以及 <code>for-in 循环</code>：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 基础for循环</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">print</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 遍历数组</span></span><br><span class="line"><span class="keyword">var</span> names = [<span class="string">"why"</span>, <span class="string">"cba"</span>, <span class="string">"cba"</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; names.length; i++) &#123;</span><br><span class="line">  <span class="built_in">print</span>(names[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> name <span class="keyword">in</span> names) &#123;</span><br><span class="line">  <span class="built_in">print</span>(name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>while 和 do-while 和其他语言一致，break 和 continue 用法也是一致</p>
</blockquote>
<h2 id="四、Dart-的面向对象"><a href="#四、Dart-的面向对象" class="headerlink" title="四、Dart 的面向对象"></a>四、Dart 的面向对象</h2><h3 id="1、类的定义"><a href="#1、类的定义" class="headerlink" title="1、类的定义"></a>1、类的定义</h3><p>Dart 中使用 <code>class</code> 关键字来定义类：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">"lqr"</span>, <span class="number">18</span>);</span><br><span class="line">  <span class="comment">// 从Dart2开始，new关键字可以省略</span></span><br><span class="line">  <span class="keyword">var</span> p2 = Person(<span class="string">"lqr"</span>, <span class="number">18</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line">  <span class="built_in">int</span> age;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Person(String name, int age) &#123;</span></span><br><span class="line">  <span class="comment">//   this.name = name;</span></span><br><span class="line">  <span class="comment">//   this.age = age;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 等同于上面的代码</span></span><br><span class="line">  Person(<span class="keyword">this</span>.name, <span class="keyword">this</span>.age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、类的构造函数"><a href="#2、类的构造函数" class="headerlink" title="2、类的构造函数"></a>2、类的构造函数</h3><p>Dart 不支持函数重载，所以，构造函数也一样不能重载。不过，可以使用 <code>命名构造函数</code> 来解决：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> p = Person(<span class="string">"lqr"</span>, <span class="number">18</span>);</span><br><span class="line">  <span class="keyword">var</span> p1 = <span class="keyword">new</span> Person.withNameAgeHeight(<span class="string">"lqr"</span>, <span class="number">18</span>, <span class="number">1.88</span>);</span><br><span class="line">  <span class="keyword">var</span> p2 = Person.fromMap(&#123;</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"lqr"</span>,</span><br><span class="line">    <span class="string">"age"</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="string">"height"</span>: <span class="number">1.88</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line">  <span class="built_in">int</span> age;</span><br><span class="line">  <span class="built_in">double</span> height;</span><br><span class="line"></span><br><span class="line">  Person(<span class="keyword">this</span>.name, <span class="keyword">this</span>.age);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Dart中没有函数重载</span></span><br><span class="line">  <span class="comment">// Person(this.name, this.age, this.height); // IDE报错：The default constructor is already defined.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 命名构造函数</span></span><br><span class="line">  Person.withNameAgeHeight(<span class="keyword">this</span>.name, <span class="keyword">this</span>.age, <span class="keyword">this</span>.height);</span><br><span class="line"></span><br><span class="line">  Person.fromMap(<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt; map) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = map[<span class="string">'name'</span>];</span><br><span class="line">    <span class="keyword">this</span>.age = map[<span class="string">'age'</span>];</span><br><span class="line">    <span class="keyword">this</span>.height = map[<span class="string">'height'</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"<span class="subst">$name</span> <span class="subst">$age</span> <span class="subst">$height</span>"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、类的初始化列表"><a href="#3、类的初始化列表" class="headerlink" title="3、类的初始化列表"></a>3、类的初始化列表</h3><p>如果类中的属性使用 final 修饰，那么在必须在构造函数中对 final 属性进行赋值，但要注意的是，不能在构造函数的函数体内对 final 属性赋值：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> name;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> age;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Person(this.name, this.age) &#123;&#125; // 必传参数</span></span><br><span class="line">  Person(<span class="keyword">this</span>.name, &#123;<span class="keyword">this</span>.age = <span class="number">10</span>&#125;) &#123;&#125; <span class="comment">// （带默认值的）可选参数</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Person(this.name) &#123; // IDE报错：All final variables must be initialized, but 'age' isn't.</span></span><br><span class="line">  <span class="comment">//   this.age = 10; // IDE报错：'age' can't be used as a setter because it's final.</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>虽然 Dart 不支持在构造函数函数体中对 final 属性赋值，但是可以用 <code>初始化列表</code> 对其赋值：</p>
<blockquote>
<p>初始化列表一般与命名可选参数配合使用，当外界调用构造函数时，可以对形参对应的属性进行校验，以及设置初始值。</p>
</blockquote>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> name;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> age;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// function ():xxxxxx &#123;&#125; ，其中xxxxxx部分就是初始化列表</span></span><br><span class="line">  Person(<span class="keyword">this</span>.name) : <span class="keyword">this</span>.age = <span class="number">10</span> &#123;&#125; <span class="comment">// 初始化列表：可能使用 表达式 来为属性赋值</span></span><br><span class="line">  <span class="comment">// Person(this.name, &#123;this.age = 10&#125;) &#123;&#125; // （带默认值的）可选参数：只能使用 赋值语句 来为属性赋值</span></span><br><span class="line">  <span class="comment">// Person(this.name, &#123;int age&#125;) : this.age = age ?? 10 &#123;&#125; // 初始化列表：可以对形参进行校验，以及设置初始化值</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 初始化列表有多个时，用逗号隔开</span></span><br><span class="line">  <span class="comment">// Person(this.name, &#123;int age, double height&#125;) : this.age = age ?? 10, this.height = height ?? 1.88 &#123;&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4、重定向构造函数"><a href="#4、重定向构造函数" class="headerlink" title="4、重定向构造函数"></a>4、重定向构造函数</h3><p>重定向构造函数，其实就是在一个构造函数中，去调用另一个构造函数：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line">  <span class="built_in">int</span> age;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 构造函数的重定向</span></span><br><span class="line">  Person(<span class="built_in">String</span> name) : <span class="keyword">this</span>._internal(name, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  Person._internal(<span class="keyword">this</span>.name, <span class="keyword">this</span>.age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5、常量构造函数"><a href="#5、常量构造函数" class="headerlink" title="5、常量构造函数"></a>5、常量构造函数</h3><p>在某些情况下，我们希望 <code>传入相同的值</code> 能 <code>返回同一个对象</code>，这时，可以使用常量构造函数：</p>
<ul>
<li><p>常量构造函数：</p>
<ul>
<li><p>在构造函数前加 <code>const</code> 进行修改。</p>
</li>
<li><p>拥有常量构造函数的类中，所有的成员变量必须使用 <code>final</code> 修饰。</p>
</li>
<li><p>为了可以通过常量构造函数创建出相同的对象，不再使用 new 关键字，而是使用 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const</span><br></pre></td></tr></table></figure>

<p> 关键字。</p>
<ul>
<li>如果是将结果赋值给 <code>const</code> 修饰的标识符时，<code>const</code> 可以省略。</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="comment">// 用 const常量 去接收一个常量构造函数的结果，可以省略 const</span></span><br><span class="line">  <span class="comment">// const p1 = const Person("lqr", 18);</span></span><br><span class="line">  <span class="keyword">const</span> p1 = Person(<span class="string">"lqr"</span>, <span class="number">18</span>);</span><br><span class="line">  <span class="keyword">const</span> p2 = Person(<span class="string">"lqr"</span>, <span class="number">18</span>);</span><br><span class="line">  <span class="built_in">print</span>(identical(p1, p2)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 如果用 var变量 去接收一个常量构造函数的结果，则这时省略的不是 const，而是 new！！</span></span><br><span class="line">  <span class="keyword">var</span> p11 = Person(<span class="string">"lqr"</span>, <span class="number">18</span>); <span class="comment">// ==&gt; var p11 = new Person("lqr");</span></span><br><span class="line">  <span class="keyword">var</span> p22 = Person(<span class="string">"lqr"</span>, <span class="number">18</span>);</span><br><span class="line">  <span class="built_in">print</span>(identical(p11, p22)); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 必须所有的属性值相同，对象才是同一个</span></span><br><span class="line">  <span class="keyword">const</span> p111 = Person(<span class="string">"lqr"</span>, <span class="number">18</span>);</span><br><span class="line">  <span class="keyword">const</span> p222 = Person(<span class="string">"lqr"</span>, <span class="number">20</span>);</span><br><span class="line">  <span class="built_in">print</span>(identical(p111, p222)); <span class="comment">// false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 拥有常量构造方法的类中，所有的成员变量必须是final修饰</span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> name;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> age;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 一个类中只能有一个常量构造方法，命名构造方法也不行</span></span><br><span class="line">  <span class="comment">// const Person(this.name);</span></span><br><span class="line">  <span class="keyword">const</span> Person(<span class="keyword">this</span>.name, <span class="keyword">this</span>.age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6、工厂构造函数"><a href="#6、工厂构造函数" class="headerlink" title="6、工厂构造函数"></a>6、工厂构造函数</h3><p>为了满足 <code>传入相同的值，得到相同的对象</code> 这个需求，除了可以使用常量构造函数外，还可以使用工厂构造函数，而且工厂构造函数更加灵活。</p>
<ul>
<li>工厂构造函数：在构造函数前加 <code>factory</code> 关键字进行修改。</li>
<li>工厂构造函数与普通的构造函数的区别：<ul>
<li>普通的构造函数：会自动返回创建出来的对象，不能手动返回</li>
<li>工厂构造函数最大的特点：可以手动的返回一个对象</li>
</ul>
</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">final</span> p1 = Person.withName(<span class="string">"lqr"</span>);</span><br><span class="line">  <span class="keyword">final</span> p2 = Person.withName(<span class="string">"lqr"</span>);</span><br><span class="line">  <span class="built_in">print</span>(identical(p1, p2));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line">  <span class="built_in">String</span> color;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// static 修饰的属性是类属性，可以通过类名直接调用</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, Person&gt; _nameCache = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  Person(<span class="keyword">this</span>.name, <span class="keyword">this</span>.color);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 普通的构造函数：会自动返回创建出来的对象，不能手动返回</span></span><br><span class="line">  <span class="comment">// 工厂构造函数最大的特点：可以手动的返回一个对象</span></span><br><span class="line">  <span class="keyword">factory</span> Person.withName(<span class="built_in">String</span> name) &#123;</span><br><span class="line">    <span class="keyword">if</span> (_nameCache.containsKey(name)) &#123;</span><br><span class="line">      <span class="keyword">return</span> _nameCache[name];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">final</span> p = Person(name, <span class="string">"default"</span>);</span><br><span class="line">      _nameCache[name] = p;</span><br><span class="line">      <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7、类的-setter-和-getter"><a href="#7、类的-setter-和-getter" class="headerlink" title="7、类的 setter 和 getter"></a>7、类的 setter 和 getter</h3><p>很多时候，我们并不希望外部可以直接访问对象字段，而是经过 <code>setter</code> 和 <code>getter</code> 中转，这样的好处是，可以在 <code>setter</code> 和 <code>getter</code> 中做一些额外的工作，Dart 支持为字段增加 <code>setter</code> 和 <code>getter</code>：</p>
<ul>
<li><code>setter</code> ：前面使用 <code>set</code> 声明，并且需要用 <code>()</code> 接收参数。</li>
<li><code>getter</code> ：前面使用 <code>get</code> 声明，还需要声明返回值类型，但是不能有 <code>()</code> 接收参数。</li>
<li><code>setter</code> 和 <code>getter</code> 像字段一样使用。</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">final</span> p1 = Person();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// p1.setName("lqr"); // IDE报错：The method 'setName' isn't defined for the type 'Person'.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// setter 和 getter 像字段一样使用</span></span><br><span class="line">  p1.setName = <span class="string">"lqr"</span>;</span><br><span class="line">  <span class="built_in">print</span>(p1.getName); <span class="comment">// lqr</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// setter</span></span><br><span class="line">  <span class="comment">// set setName(String name) &#123;</span></span><br><span class="line">  <span class="comment">//   this.name = name;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="keyword">set</span> setName(<span class="built_in">String</span> name) =&gt; <span class="keyword">this</span>.name = name;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getter：注意getter没有()</span></span><br><span class="line">  <span class="comment">// String get getName &#123;</span></span><br><span class="line">  <span class="comment">//   return this.name;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="built_in">String</span> <span class="keyword">get</span> getName =&gt; <span class="keyword">this</span>.name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>严格意义上来说，Dart 中的 <code>setter</code> 和 <code>getter</code> 已经不能算是方法了吧。</p>
</blockquote>
<h3 id="8、类的继承"><a href="#8、类的继承" class="headerlink" title="8、类的继承"></a>8、类的继承</h3><p>Dart 中的继承使用 <code>extends</code> 关键字，子类中使用 <code>super</code> 来访问父类。</p>
<blockquote>
<p>注意：Dart 只支持单继承。</p>
</blockquote>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> age;</span><br><span class="line"></span><br><span class="line">  Animal(<span class="keyword">this</span>.age);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> run() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"向前跑~"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 必须在初始化列表中，调用父类的构造函数</span></span><br><span class="line">  Person(<span class="keyword">this</span>.name, <span class="built_in">int</span> age) : <span class="keyword">super</span>(age);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> run() &#123;</span><br><span class="line">    <span class="comment">// super.run();</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"向前走～"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Dart只支持单继承</span></span><br><span class="line"><span class="comment">// class SuperMan extends Runner, Flyer&#123; // IDE报错：Each class definition can hava at most one extends clause.</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="9、抽象类的使用"><a href="#9、抽象类的使用" class="headerlink" title="9、抽象类的使用"></a>9、抽象类的使用</h3><p>Dart 可以使用 <code>abstract</code> 关键字来定义抽象类：</p>
<ul>
<li>抽象类中的 <code>抽象方法不需要使用 abstract 关键字修饰</code></li>
<li>抽象类不能实例化</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">final</span> s = Shape(); <span class="comment">// IDE报错：Abstract classes can't be instantiated.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意2：抽象类不能实例化</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 抽象方法，没有方法体，也不用 abstract 关键字修饰</span></span><br><span class="line">  <span class="built_in">int</span> getArea();</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> getInfo() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"形状"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注意1：继承自抽象类后，必须实现抽象类的抽象方法</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">int</span> getArea() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：Dart 中抽象类不能实例化，但也有特殊情况，有工厂构造函数(factory)的抽象类可以实例化，比如：Map。</p>
</blockquote>
<h3 id="10、隐式接口"><a href="#10、隐式接口" class="headerlink" title="10、隐式接口"></a>10、隐式接口</h3><p>Dart 使用 <code>implements</code> 关键字来实现多个接口，但奇葩的是，Dart 中没有用来定义接口的关键字，默认情况下所有的类都是隐式接口，即可以 <code>implements</code> 任意类：</p>
<blockquote>
<p>注意：要重写被 <code>implements</code> 的类中的所有方法！</p>
</blockquote>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Dart中没有哪一个关键字是来定义接口的</span></span><br><span class="line"><span class="comment">// 没有这些关键字interface/protocol</span></span><br><span class="line"><span class="comment">// 默认情况下所有的类都是隐式接口</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Runner</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> running() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"跑吧"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flyer</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> flying() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"飞吧"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当将一个类当做接口使用时，那么实现这个接口的类，必须实现这个接口中所有方法（不可以在这些方法里使用super）</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperMan</span> <span class="keyword">implements</span> <span class="title">Runner</span>, <span class="title">Flyer</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> flying() &#123;</span><br><span class="line">    <span class="comment">// super.flying(); // IDE报错：The method 'flying' is always abstract in the supertype.</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> running() &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>建议：用 <code>abstract class</code> 来声明接口，反正被 <code>implements</code> 的类的所有方法都要重写。</p>
</blockquote>
<h3 id="11、mixin-混入的使用"><a href="#11、mixin-混入的使用" class="headerlink" title="11、mixin 混入的使用"></a>11、mixin 混入的使用</h3><p>当遇到要复用 2 个类中方法的时候，要怎么办？</p>
<ul>
<li>如果使用接口方式则需要重新实现 2 个类中各自的方法，这样根本就不能算是复用；</li>
<li>而 Dart 又只能单继承，最多只能复用 1 个类中方法；</li>
</ul>
<p>Dart 提供了另一个方案：<code>Mixin 混入</code>。可以定义 2 个 mixin 类，通过 <code>with</code> 关键字把这 2 个 mixin 类混入到一个类 A 中，这时类 A 就拥有了它们的方法，从而达到复用 2 个类中方法的目的：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">final</span> superMan = SuperMan();</span><br><span class="line">  superMan.eating(); <span class="comment">// 动作吃东西</span></span><br><span class="line">  superMan.running(); <span class="comment">// running（调用的是混入类Runner中的running()）</span></span><br><span class="line">  superMan.flying(); <span class="comment">// flying</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> eating() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"动作吃东西"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> running() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"动物running"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">mixin</span> Runner &#123;</span><br><span class="line">  <span class="keyword">void</span> running() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"running"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">mixin</span> Flyer &#123;</span><br><span class="line">  <span class="keyword">void</span> flying() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"flying"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Runner中的running()与Animal中的running()冲突，这时会发生覆盖，即SuperMan中的running()调用的是Runner的running()</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SuperMan</span> <span class="keyword">extends</span> <span class="title">Animal</span> <span class="title">with</span> <span class="title">Runner</span>, <span class="title">Flyer</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12、类属性和类方法"><a href="#12、类属性和类方法" class="headerlink" title="12、类属性和类方法"></a>12、类属性和类方法</h3><p>类中使用 <code>static</code> 关键字修饰的属性(或方法)就是类属性(或类方法)，类属性和类方法可以通过类名直接调用：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  Person.courseTime = <span class="string">"8:00"</span>;</span><br><span class="line">  <span class="built_in">print</span>(Person.courseTime);</span><br><span class="line">  Person.gotoCourse();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 成员变量</span></span><br><span class="line">  <span class="built_in">String</span> name;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 静态属性（类属性）</span></span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">String</span> courseTime;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 对象方法</span></span><br><span class="line">  <span class="keyword">void</span> eating() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"eating"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 静态方法（类方法）</span></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">void</span> gotoCourse() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"去上课"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="13、枚举的使用"><a href="#13、枚举的使用" class="headerlink" title="13、枚举的使用"></a>13、枚举的使用</h3><p>枚举使用 <code>enum</code> 关键字来定义，枚举有 2 个常见的属性：</p>
<ul>
<li>index：用于表示每个枚举的索引，从 0 开始</li>
<li>values：包含每个枚举值的集合</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 枚举：enum</span></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">final</span> color = Colors.red;</span><br><span class="line">  <span class="keyword">switch</span> (color) &#123;</span><br><span class="line">    <span class="keyword">case</span> Colors.red:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">"红色"</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> Colors.blue:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">"蓝色"</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> Colors.green:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">"绿色"</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(Colors.values); <span class="comment">// [Colors.red, Colors.blue, Colors.green]</span></span><br><span class="line">  <span class="built_in">print</span>(Colors.red.index); <span class="comment">// 0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> Colors &#123;</span><br><span class="line">  red,</span><br><span class="line">  blue,</span><br><span class="line">  green,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="14、泛型的使用"><a href="#14、泛型的使用" class="headerlink" title="14、泛型的使用"></a>14、泛型的使用</h3><p>集合类型使用泛型：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// List使用时的泛型写法：</span></span><br><span class="line"><span class="keyword">var</span> names1 = [<span class="string">"abc"</span>, <span class="string">"cba"</span>, <span class="string">"nba"</span>, <span class="number">111</span>]; <span class="comment">// List&lt;Object&gt;</span></span><br><span class="line"><span class="keyword">var</span> names2 = [<span class="string">"abc"</span>, <span class="string">"cba"</span>, <span class="string">"nba"</span>]; <span class="comment">// List&lt;String&gt;</span></span><br><span class="line"><span class="comment">// var names3 = &lt;String&gt;["abc", "cba", "nba", 111]; // IDE报错：The element type 'int' can't be assigned to the list type 'String'.</span></span><br><span class="line"><span class="keyword">var</span> names3 = &lt;<span class="built_in">String</span>&gt;[<span class="string">"abc"</span>, <span class="string">"cba"</span>, <span class="string">"nba"</span>]; <span class="comment">// List&lt;String&gt;</span></span><br><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; names4 = [<span class="string">"abc"</span>, <span class="string">"cba"</span>, <span class="string">"nba"</span>]; <span class="comment">// List&lt;String&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Map使用时的泛型写法：</span></span><br><span class="line"><span class="keyword">var</span> info1 = &#123;<span class="string">"name"</span>: <span class="string">"lqr"</span>, <span class="string">"age"</span>: <span class="number">18</span>&#125;; <span class="comment">// _InternalLinkedHashMap&lt;String, Object&gt;</span></span><br><span class="line"><span class="keyword">var</span> info2 = &lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt;&#123;<span class="string">'name'</span>: <span class="string">'lqr'</span>, <span class="string">'age'</span>: <span class="string">'18'</span>&#125;; <span class="comment">// _InternalLinkedHashMap&lt;String, String&gt;</span></span><br><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; info3 = &#123;<span class="string">'name'</span>: <span class="string">'lqr'</span>, <span class="string">'age'</span>: <span class="string">'18'</span>&#125;; <span class="comment">// _InternalLinkedHashMap&lt;String, String&gt;</span></span><br></pre></td></tr></table></figure>

<p>类定义使用泛型：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">var</span> point = Point&lt;<span class="built_in">double</span>&gt;(<span class="number">1.23333</span>, <span class="number">1.9527</span>); <span class="comment">// Point&lt;double&gt;</span></span><br><span class="line">  <span class="keyword">final</span> pointX = point.setAndGetX(<span class="number">5.55</span>);</span><br><span class="line">  <span class="built_in">print</span>(pointX); <span class="comment">// 5.55</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// class Point&lt;T&gt; // 泛型T是Object的子类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">num</span>&gt; </span>&#123; <span class="comment">// 泛型T是数字类型</span></span><br><span class="line">  T x;</span><br><span class="line">  T y;</span><br><span class="line"></span><br><span class="line">  Point(<span class="keyword">this</span>.x, <span class="keyword">this</span>.y);</span><br><span class="line"></span><br><span class="line">  T setAndGetX(T x) &#123;</span><br><span class="line">    <span class="keyword">this</span>.x = x;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.x;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>T extends num</code> 用于限制泛型的类型必须是数字，不限制的话则默认是 Object。</p>
</blockquote>
<h2 id="五、Dart-中库的使用"><a href="#五、Dart-中库的使用" class="headerlink" title="五、Dart 中库的使用"></a>五、Dart 中库的使用</h2><ul>
<li>Dart 中你可以导入一个库来使用它所提供的功能。</li>
<li>Dart 中任何一个 dart 文件都是一个库，即使你没有用关键字 <code>library</code> 声明。</li>
</ul>
<p>库导入的语法：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'库所在的 uri'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="1、使用系统的库"><a href="#1、使用系统的库" class="headerlink" title="1、使用系统的库"></a>1、使用系统的库</h3><p>系统库的 uri 一般以 <code>dart:</code> 开头，常见的系统库有：<code>dart:io</code>、<code>dart:async</code>、<code>dart:math</code> 等：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import 'dart:io';</span></span><br><span class="line"><span class="comment">// import 'dart:isolate';</span></span><br><span class="line"><span class="comment">// import 'dart:async';</span></span><br><span class="line"><span class="comment">// import 'dart:math';</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 系统的库：import 'dart:库的名字';</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">'dart:math'</span>;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">final</span> num1 = <span class="number">20</span>;</span><br><span class="line">  <span class="keyword">final</span> num2 = <span class="number">30</span>;</span><br><span class="line">  <span class="built_in">print</span>(min(num1, num2));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：<code>dart:core</code> 也是很常用的系统库，不过可以省略不写。</p>
</blockquote>
<h3 id="2、使用自定义库"><a href="#2、使用自定义库" class="headerlink" title="2、使用自定义库"></a>2、使用自定义库</h3><p>自定义库就是自己项目中定义的其他 dart 文件，比如在 utils 目录下创建一个 <code>math_utils.dart</code> 文件，内容如下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils 目录下的 math_utils.dart 文件内容：</span></span><br><span class="line"><span class="built_in">int</span> sum(<span class="built_in">int</span> num1, <span class="built_in">int</span> num2) &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> mul(<span class="built_in">int</span> num1, <span class="built_in">int</span> num2) &#123;</span><br><span class="line">  <span class="keyword">return</span> num1 * num2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里的 <code>math_utils.dart</code> 文件就是一个自定义库，你可以在其他 dart 文件中导入：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入自定义库可以是相对路径或绝对路径。</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'utils/math_utils.dart'</span>;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="built_in">print</span>(sum(<span class="number">20</span>, <span class="number">30</span>));</span><br></pre></td></tr></table></figure>

<h3 id="3、使用第三方库"><a href="#3、使用第三方库" class="headerlink" title="3、使用第三方库"></a>3、使用第三方库</h3><p>那些存放在远程仓库上的库文件就是第三方库，如果项目中需要依赖第三方库，就需要在项目目录下创建一个 <code>pubspec.yaml</code> 文件，其中 <code>dependencies</code> 部分填写要依赖的第三方库的描述（库名: 版本）：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">myProjectName</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">my</span> <span class="string">project</span> <span class="string">name</span></span><br><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">http:</span> <span class="string">^0.12.0+4</span></span><br><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="attr">sdk:</span> <span class="string">"&gt;=2.10.0 &lt;3.0.0"</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>可以在 <a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2F">pub.dev</a> 上查找第三方库的使用说明。</p>
</blockquote>
<p>填写好依赖后，需要执行 <code>dart pub get</code> 或 <code>flutter pub get</code> 命令，让终端从服务器上拉取第三方对应的版本文件，之后就可以在代码中使用这个第三方库了：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:http/http.dart'</span> <span class="keyword">as</span> http;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> url = <span class="string">'https://example.com/whatsit/create'</span>;</span><br><span class="line">  <span class="keyword">var</span> response = <span class="keyword">await</span> http.post(url, body: &#123;<span class="string">'name'</span>: <span class="string">'doodle'</span>, <span class="string">'color'</span>: <span class="string">'blue'</span>&#125;);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'Response status: <span class="subst">$&#123;response.statusCode&#125;</span>'</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'Response body: <span class="subst">$&#123;response.body&#125;</span>'</span>);</span><br><span class="line">  <span class="built_in">print</span>(<span class="keyword">await</span> http.read(<span class="string">'https://example.com/foobar.txt'</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4、库方法名冲突"><a href="#4、库方法名冲突" class="headerlink" title="4、库方法名冲突"></a>4、库方法名冲突</h3><p>比如：<code>math_utils.dart</code> 库中有 <code>int sum(int num1, int num2)</code> 方法，当前 dart 文件中又定义了 <code>void sum(int num1, int num2)</code> 方法，这 2 个方法名相同，但返回值不同：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'utils/math_utils.dart'</span>;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="built_in">print</span>(sum(<span class="number">20</span>, <span class="number">30</span>)); <span class="comment">// IDE报错：This experssion has a type of 'void' so its value can't be used.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// void sum(num1, num2) // 参数类型可以不写，默认是 dynamic</span></span><br><span class="line"><span class="keyword">void</span> sum(<span class="built_in">int</span> num1, <span class="built_in">int</span> num2) &#123;</span><br><span class="line">  <span class="built_in">print</span>(num1 + num2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这时，当前 dart 文件识别到的是自己的 sum()方法，而实际上我们想要使用的是 <code>math_utils.dart</code> 库中 sum()方法，这就发生了库方法名冲突，可以使用 <code>as</code> 关键字给库起别名来解决：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'utils/math_utils.dart'</span> <span class="keyword">as</span> mUtils;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="built_in">print</span>(mUtils.sum(<span class="number">20</span>, <span class="number">30</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> sum(sum1, sum2) &#123;</span><br><span class="line">  <span class="built_in">print</span>(sum1 + sum2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5、库内容的显示和隐藏"><a href="#5、库内容的显示和隐藏" class="headerlink" title="5、库内容的显示和隐藏"></a>5、库内容的显示和隐藏</h3><p>默认 import 进来的库中所有内容都是可见的，但是很多时候我们希望只导入库中的某些内容，或者希望隐藏库中的某些内容，这时可以使用 <code>show</code> 和 <code>hide</code> 关键字：</p>
<ul>
<li>show：显示某个成员（ 屏蔽其他）</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import "utils/math_utils.dart" show sum, mul;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"utils/math_utils.dart"</span> <span class="keyword">show</span> sum;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="built_in">print</span>(sum(<span class="number">20</span>, <span class="number">30</span>));</span><br><span class="line">  <span class="built_in">print</span>(mul(<span class="number">20</span>, <span class="number">30</span>)); <span class="comment">// IDE报错：The function 'mul' isn't defined.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>hide：隐藏某个成员（显示其他）</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import "utils/math_utils.dart" hide sum, mul;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"utils/math_utils.dart"</span> <span class="keyword">hide</span> sum;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="built_in">print</span>(sum(<span class="number">20</span>, <span class="number">30</span>)); <span class="comment">// IDE报错：The function 'sum' isn't defined.</span></span><br><span class="line">  <span class="built_in">print</span>(mul(<span class="number">20</span>, <span class="number">30</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6、批量导入库文件"><a href="#6、批量导入库文件" class="headerlink" title="6、批量导入库文件"></a>6、批量导入库文件</h3><p>有些时候，可能需要在一个 dart 文件中，导入 n 个库，这还是能接受的：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'utils/math_utils.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'utils/date_utils.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> ...</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="built_in">print</span>(sum(<span class="number">20</span>, <span class="number">30</span>));</span><br><span class="line">  <span class="built_in">print</span>(dateFormat());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但如果是 n 个 dart 文件都要导入相同的 m 个库呢？很明显，需要有个统一批量导入库文件的方案：可以创建一个新的 dart 文件，使用 <code>export</code> 关键字统一导库。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils 目录下的 utils.dart 文件内容：</span></span><br><span class="line"><span class="keyword">export</span> <span class="string">'math_utils.dart'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="string">'date_utils.dart'</span>;</span><br><span class="line"><span class="keyword">export</span> ...</span><br></pre></td></tr></table></figure>

<p>这时，其他 dart 文件中，只需要导入这个 utils.dart 就好了：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'utils/utils.dart'</span>;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="built_in">print</span>(sum(<span class="number">20</span>, <span class="number">30</span>));</span><br><span class="line">  <span class="built_in">print</span>(dateFormat());</span><br><span class="line"></span><br><span class="line">  <span class="comment">// math_utils.dart中的_min()无法被外界调用</span></span><br><span class="line">  <span class="comment">// print(_min(20, 30)); // IDE报错：The function '_min' isn't defined.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：Dart 语言中没有可见性修饰符，即没有 public、protected、private。如果某个成员属性或方法不想被外界（其他 dart 文件）调用，可以在名字前加个下划线 <code>_</code>。</p>
</blockquote>
<h2 id="六、Dart-Extension-扩展类功能"><a href="#六、Dart-Extension-扩展类功能" class="headerlink" title="六、Dart Extension 扩展类功能"></a>六、Dart Extension 扩展类功能</h2><p>Dart 从 2.7 版本开始加入了 Extension 语法，可以给已经存在的类扩展成员方法。扩展类方法需要使用到 <code>extension</code> 关键字，语法为：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> XXX <span class="keyword">on</span> YYY&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>表示给 YYY 类进行扩展，扩展名是 XXX（名字可以随便写）。</p>
<h3 id="1、扩展成员方法"><a href="#1、扩展成员方法" class="headerlink" title="1、扩展成员方法"></a>1、扩展成员方法</h3><p>如果你想给 String 扩展一个成员方法的话，可以这么写：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> StringExt <span class="keyword">on</span> <span class="built_in">String</span> &#123;</span><br><span class="line">  <span class="built_in">String</span> sayHello() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"hello <span class="subst">$this</span>"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">final</span> name = <span class="string">"GitLqr"</span>;</span><br><span class="line">  <span class="built_in">print</span>(name.sayHello()); <span class="comment">// hello GitLqr</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、扩展操作符"><a href="#2、扩展操作符" class="headerlink" title="2、扩展操作符"></a>2、扩展操作符</h3><p>Extension 也可以扩展操作符, 如：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> StringExt <span class="keyword">on</span> <span class="built_in">String</span> &#123;</span><br><span class="line">  <span class="keyword">operator</span> *(<span class="built_in">int</span> count) &#123;</span><br><span class="line">    <span class="built_in">String</span> result = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">      result += <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">final</span> name = <span class="string">"GitLqr"</span>;</span><br><span class="line">  <span class="built_in">print</span>(name * <span class="number">3</span>); <span class="comment">// GitLqrGitLqrGitLqr</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、扩展成员”属性”"><a href="#3、扩展成员”属性”" class="headerlink" title="3、扩展成员”属性”"></a>3、扩展成员”属性”</h3><p>Extension 除了可以扩展方法(method)、操作符(operator)，还可以扩展 getter、setter，但无法扩展实例属性（或者叫字段）。不过，因为 getter 在调用时跟调用属性的语法很像，所以这里的”属性”是带引号的：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extension</span> StringExt <span class="keyword">on</span> <span class="built_in">String</span> &#123;</span><br><span class="line">  <span class="built_in">int</span> <span class="keyword">get</span> size &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.length;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="keyword">final</span> name = <span class="string">"GitLqr"</span>;</span><br><span class="line">  <span class="built_in">print</span>(name.size); <span class="comment">// 6</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>setter 同理，这里不多举例，更多细节，可通过官方文档查看：<a href="https://dart.dev/guides/language/extension-methods" target="_blank" rel="noopener">https://dart.dev/guides/language/extension-methods</a></p>
 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          打赏
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>版权声明： </strong>
          
          本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://p709723778.gitee.io/2020/11/12/Flutter-Dart%E8%AF%AD%E6%B3%95%E7%89%B9%E6%80%A7/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>  
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Dart/" rel="tag">Dart</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flutter/" rel="tag">Flutter</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/2020/12/02/Flutter-Dart%E8%BF%90%E7%AE%97%E7%AC%A6/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            Flutter ~ Dart运算符
          
        </div>
      </a>
    
    
      <a href="/2020/07/23/iOS%E5%BC%80%E5%8F%91%E4%B9%8B-iOS14-%E5%B9%BF%E5%91%8A%E6%A0%87%E8%AF%86IDFA/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">iOS开发之 ~ iOS14 广告标识IDFA</div>
      </a>
    
  </nav>

   
<!-- valine评论 -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "R62nu0tFBeThG33C8K4fY8r0-gzGzoHsz",
    app_key: "n4AuFvlWuowdXyxfyrfWtk9n",
    path: window.location.pathname,
    avatar: "monsterid",
    placeholder: "给我的文章加点评论吧~",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box {
    padding: 5px 30px;
  }

  @media screen and (max-width: 800px) {
    #vcomments-box {
      padding: 5px 0px;
    }
  }

  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }
</style>

 
   
     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2012-2022
        <i class="ri-heart-fill heart_icon"></i> Soto Pu
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        由 <a href="https://hexo.io" target="_blank">Hexo</a> 强力驱动
        <span class="division">|</span>
        主题 - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
         <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_'%3E%3C/span%3E%3Cscript src='https://s4.cnzz.com/z_stat.php%3Fid%3D%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
        <!-- <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script> -->
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Soto"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/photos">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2015/03/24/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->
 
<script src="/js/clickBoom2.js"></script>
 
<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>